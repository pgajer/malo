% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/magelo_external_bb.R
\name{magelo.with.external.BB}
\alias{magelo.with.external.BB}
\title{Legacy-Compatible External BB Smoother Wrapper}
\usage{
magelo.with.external.BB(
  x,
  y,
  lambda,
  bw = NULL,
  grid.size = 400,
  degree = 1,
  min.K = 5,
  nn.kernel = "epanechnikov"
)
}
\arguments{
\item{x}{Numeric vector of predictor values.}

\item{y}{Numeric vector of response values.}

\item{lambda}{Matrix of external BB weights (length(x) x n.BB).}

\item{bw}{Optional spline smoothing control. If \code{NULL}, default
spline settings are used.}

\item{grid.size}{Number of grid points. Default is 400.}

\item{degree}{Legacy polynomial degree metadata (0, 1, or 2). Retained
for compatibility.}

\item{min.K}{Legacy minimum-neighbor metadata retained for compatibility.}

\item{nn.kernel}{Legacy kernel argument retained for compatibility.}
}
\value{
A list with components:
\describe{
\item{gpredictions}{Point estimate on grid}
\item{BB.gpredictions}{Matrix of BB gpredictions (ng x n.BB)}
\item{BB.dgpredictions}{Matrix of finite-difference BB derivatives
(ng x n.BB)}
\item{xgrid}{Grid points}
\item{opt.bw}{Smoothing control used by the backend}
}
}
\description{
A legacy-compatible wrapper that accepts the historical
\code{magelo.with.external.BB()} interface while using a spline-based
backend. This keeps paired BB workflows working without depending on
the legacy \code{magelo()} fitting path.
}
\details{
This function generates BB samples using provided external weights and a
spline smoother. For paired comparisons, call this function twice
(for signal and null) with the same \code{lambda} matrix.
}
\examples{
\dontrun{
# Generate data
x <- runif(100)
y <- sin(2*pi*x) + rnorm(100, sd = 0.2)

# Generate shared weights
lambda <- generate.dirichlet.weights(100, 500)

# Fit signal model
signal <- magelo.with.external.BB(x, y, lambda)

# Fit null model (permuted y)
null <- magelo.with.external.BB(x, sample(y), lambda)

# Now signal and null BB samples use the same weights
}

}
